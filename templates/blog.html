{% extends "base.html" %}

{% block title %}Записи{% endblock %}

{% block content %}
<div class="container">
    {% for post in posts %}
    <div class="post mb-4 pb-3 border-bottom">
        <h3>{{ post.name }}</h3>
        <p>{{ post.text }}</p>
        <div class="image-container" style="max-width:300px;">
            {% if post.image_path %}
            <img src="{{ post.image_path }}" alt="Image" class="img-fluid" style="max-width:300px;"
                 onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            {% else %}
            <svg class="bd-placeholder-img card-img-top" width="300" height="225"
                 xmlns="http://www.w3.org/2000/svg"
                 role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice"
                 focusable="false">
                <title>Placeholder</title>
                <rect width="100%" height="100%" fill="#55595c"/>
                <text x="50%" y="50%" fill="#eceeef" dy=".3em">Нет изображения</text>
            </svg>
            {% endif %}
        </div>
        <p>Автор: {{ post.author.first_name }} {{ post.author.last_name }}</p>
        <div class="d-flex justify-content-between align-items-center">
            <div class="btn-group">
                <a href="{{ url_for('post_detail', post_id=post.id) }}"
                   class="btn btn-sm btn-outline-secondary">Просмотр</a>
                <a href="{{ url_for('edit_post', post_id=post.id) }}"
                   class="btn btn-sm btn-outline-secondary">Редактировать</a>
            </div>

        </div>
    </div>
    {% else %}
    <p>Постов пока нет.</p>
    {% endfor %}
</div>
{% endblock %}
